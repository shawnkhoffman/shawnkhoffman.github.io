import{u as e}from"./index-oeZZXMOs.js";import{w as t,a as o,d as a,r as n,b as l,h as s,v as i,u as r,I as d,c as u,F as c,g as v,n as f,e as p,t as h,J as m,o as x,f as g,T as b,z as w,q as y}from"./vendor-CWSGjIKd.js";function k(e=!0){t((()=>"boolean"==typeof e?e:e.value),(e=>{const t=document.body.style;if(e){const e=(()=>{const e=document.createElement("div");e.style.cssText="\n      width: 99px;\n      height: 99px;\n      overflow: scroll;\n      position: absolute;\n      top: -9999px;\n    ",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t})(),o=window.innerWidth>document.documentElement.clientWidth,a=window.scrollY;Object.assign(t,{overflow:"hidden",position:"fixed",top:`-${a}px`,left:"0",right:"0",bottom:"0",paddingRight:o?`${e}px`:"0"})}else{const e=t.top?-1*parseInt(t.top):0;t.overflow="",t.position="",t.top="",t.left="",t.right="",t.bottom="",t.paddingRight="",window.scrollTo(0,e)}}),{immediate:!0}),o((()=>{const e=document.body.style;e.overflow="",e.position="",e.top="",e.left="",e.right="",e.bottom="",e.paddingRight=""}))}const E=["aria-label","title"],C=a({__name:"ExpandButton",props:{isExpanded:{type:Boolean},onClick:{type:Function}},setup(e,{expose:t}){const o=n(null);return t({buttonRef:o}),(t,a)=>(s(),l("button",{ref_key:"buttonRef",ref:o,onClick:a[0]||(a[0]=(...t)=>e.onClick&&e.onClick(...t)),class:"text-xl p-2 hover:text-info focus:text-info focus:outline-none focus:ring-2 focus:ring-info rounded-lg transition-colors duration-200","aria-label":e.isExpanded?"Compress modal":"Expand modal",title:e.isExpanded?"Compress modal":"Expand modal"},[i(r(d),{icon:e.isExpanded?"fa6-solid:compress":"fa6-solid:expand",class:"transition-all duration-200","aria-hidden":"true"},null,8,["icon"])],8,E))}}),N=a({__name:"NavigationButtons",props:{onPrevious:{},onNext:{},showPrevious:{type:Boolean,default:!0},showNext:{type:Boolean,default:!0},prefersReducedMotion:{type:Boolean,default:!1}},setup(e){const t=e,o=u((()=>t.prefersReducedMotion?"":"hover:scale-110 transition-transform"));return(t,a)=>(s(),l(c,null,[e.showPrevious?(s(),l("button",{key:0,class:"absolute top-1/2 transform -translate-y-1/2 -translate-x-16 left-0 p-2 text-neutral-content hover:text-info focus:text-info focus:outline-none focus:ring-2 focus:ring-info rounded-lg hidden md:block transition-colors duration-200",onClick:a[0]||(a[0]=(...t)=>e.onPrevious&&e.onPrevious(...t)),"aria-label":"Previous page",title:"Previous page"},[i(r(d),{icon:"fa6-solid:chevron-left",class:f(`text-5xl ${o.value}`),"aria-hidden":"true"},null,8,["class"])])):v("",!0),e.showNext?(s(),l("button",{key:1,class:"absolute top-1/2 transform -translate-y-1/2 translate-x-16 right-0 p-2 text-neutral-content hover:text-info focus:text-info focus:outline-none focus:ring-2 focus:ring-info rounded-lg hidden md:block transition-colors duration-200",onClick:a[1]||(a[1]=(...t)=>e.onNext&&e.onNext(...t)),"aria-label":"Next page",title:"Next page"},[i(r(d),{icon:"fa6-solid:chevron-right",class:f(`text-5xl ${o.value}`),"aria-hidden":"true"},null,8,["class"])])):v("",!0)],64))}}),P={class:"absolute bottom-2 right-2 bg-base-200/90 p-2 rounded-lg flex items-center space-x-2 shadow-lg backdrop-blur-sm transition-opacity duration-200 hover:opacity-100",role:"status","aria-live":"polite"},O={class:"text-sm font-medium text-info"},$=a({__name:"ScrollIndicator",props:{prefersReducedMotion:{type:Boolean},message:{}},setup:e=>(t,o)=>(s(),l("div",P,[i(r(d),{icon:"fa6-solid:chevron-down",class:f("text-xl text-info "+(e.prefersReducedMotion?"":"animate-bounce")),"aria-hidden":"true"},null,8,["class"]),p("span",O,h(e.message),1)]))}),I=["aria-labelledby"],R={class:"p-4 border-b border-base-300 flex justify-between items-center"},T=["id"],B={class:"p-4 border-t border-base-300 flex justify-end space-x-2"},_={key:1,class:"absolute bottom-2 left-2 bg-base-200 p-2 rounded-lg flex items-center space-x-2",role:"status","aria-live":"polite"},L={class:"text-sm text-info"},H=["aria-label"],M=["aria-selected","aria-label"],S=a({__name:"Modal",props:{isOpen:{type:Boolean},onClose:{},title:{},onNext:{},onPrevious:{},totalPages:{default:1},currentPage:{default:0},showNavigation:{type:Boolean,default:!0},isExpanded:{type:Boolean},onToggleExpand:{},triggerOverflowCheck:{},className:{default:""},contentClassName:{default:""},closeOnEscape:{type:Boolean,default:!0},closeOnOutsideClick:{type:Boolean,default:!0},initialFocus:{default:"close"}},setup(a){const d=a,E=50,P=300,O=.3,S={expanded:{width:"max-w-[95vw] md:max-w-4xl lg:max-w-5xl",height:"h-[85vh]"},normal:{width:"max-w-[90vw] md:max-w-2xl lg:max-w-3xl",height:"h-[70vh] md:h-[60vh] lg:h-[50vh]"}},j=`modal-${Math.random().toString(36).substr(2,9)}`,D=n(null),A=n(null),F=n(null),V=n(null),W=n({isContentOverflowing:!1,scrollIndicatorVisible:!0,showNavigationHint:!0,touchStart:{x:0,y:0,time:0},hasInteracted:!1}),Y=e("(prefers-reduced-motion: reduce)"),z=e("(pointer: coarse)");k(u((()=>d.isOpen)));const q=u((()=>d.isExpanded?S.expanded:S.normal)),K=u((()=>d.showNavigation&&d.totalPages>1&&!z.value)),X=e=>{if(!d.closeOnOutsideClick)return;"modal-overlay"===e.target.dataset.testid&&d.onClose()},J=()=>{if(A.value){const e=A.value.scrollHeight>A.value.clientHeight;W.value.isContentOverflowing=e,W.value.hasInteracted||(W.value.scrollIndicatorVisible=e)}},U=((e,t)=>{let o=0;return(...a)=>{const n=Date.now();n-o>=t&&(e(...a),o=n)}})((()=>{var e;(null==(e=A.value)?void 0:e.scrollTop)&&A.value.scrollTop>0&&(W.value.scrollIndicatorVisible=!1,W.value.hasInteracted=!0)}),100),G=e=>{if(!A.value)return;const{deltaY:t}=e,{scrollTop:o,scrollHeight:a,clientHeight:n}=A.value,l=t<0,s=t>0,i=o<=0,r=Math.abs(o+n-a)<=1;(l&&i||s&&r)&&e.preventDefault()},Q=e=>{W.value.touchStart={x:e.touches[0].clientX,y:e.touches[0].clientY,time:Date.now()}},Z=e=>{const{x:t,y:o,time:a}=W.value.touchStart,n=e.changedTouches[0].clientX-t,l=e.changedTouches[0].clientY-o,s=Date.now()-a,i=Math.abs(n)/s;Math.abs(n)>Math.abs(l)&&Math.abs(n)>E&&s<P&&i>O&&(n>0&&d.onPrevious?(d.onPrevious(),W.value.showNavigationHint=!1,W.value.hasInteracted=!0):n<0&&d.onNext&&(d.onNext(),W.value.showNavigationHint=!1,W.value.hasInteracted=!0))},ee=()=>{var e;null==(e=d.onPrevious)||e.call(d),W.value.showNavigationHint=!1,W.value.hasInteracted=!0},te=()=>{var e;null==(e=d.onNext)||e.call(d),W.value.showNavigationHint=!1,W.value.hasInteracted=!0},oe=e=>{switch(e.key){case"ArrowRight":d.onNext&&(d.onNext(),W.value.showNavigationHint=!1,W.value.hasInteracted=!0);break;case"ArrowLeft":d.onPrevious&&(d.onPrevious(),W.value.showNavigationHint=!1,W.value.hasInteracted=!0);break;case"Escape":d.closeOnEscape&&d.onClose()}},ae=e=>{var t;const o=null==(t=D.value)?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!(null==o?void 0:o.length))return;const a=o[0],n=o[o.length-1];"Tab"===e.key&&(e.shiftKey&&document.activeElement===a?(e.preventDefault(),n.focus()):e.shiftKey||document.activeElement!==n||(e.preventDefault(),a.focus()))},ne=((e,t)=>{let o;const a=(...a)=>{clearTimeout(o),o=setTimeout((()=>e(...a)),t)};return a.cancel=()=>clearTimeout(o),a})(J,100);return function(e,a,n={}){let l=null;t((()=>e.value),(e=>{l&&(l.disconnect(),l=null),e&&(l=new ResizeObserver((()=>{a()})),l.observe(e,n))}),{immediate:!0}),o((()=>{l&&l.disconnect()}))}(A,J),t((()=>d.isOpen),(e=>{e&&(document.addEventListener("keydown",oe),document.addEventListener("keydown",ae),m((()=>{setTimeout((()=>{var e,t,o,a;switch(d.initialFocus){case"content":null==(e=A.value)||e.focus();break;case"expand":null==(o=null==(t=V.value)?void 0:t.$el)||o.focus();break;default:{const e=F.value;e&&!e.hasAttribute("disabled")?e.focus():null==(a=D.value)||a.focus();break}}}),300)})))})),t((()=>d.isOpen),(e=>{e||(document.removeEventListener("keydown",oe),document.removeEventListener("keydown",ae))})),t((()=>[d.isOpen,d.currentPage,d.isExpanded,d.triggerOverflowCheck]),(()=>{d.isOpen&&ne()})),x((()=>{A.value&&A.value.addEventListener("wheel",G,{passive:!1}),t((()=>d.isOpen),(e=>{const t=D.value;if(e&&t&&z.value)return t.addEventListener("touchstart",Q,{passive:!0}),t.addEventListener("touchend",Z,{passive:!0}),()=>{t.removeEventListener("touchstart",Q),t.removeEventListener("touchend",Z)}}))})),o((()=>{A.value&&A.value.removeEventListener("wheel",G),ne.cancel(),document.removeEventListener("keydown",oe),document.removeEventListener("keydown",ae)})),(e,t)=>(s(),g(b,{to:"body"},[a.isOpen?(s(),l("div",{key:0,"data-testid":"modal-overlay",class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 pointer-events-auto overflow-hidden",onClick:X,role:"dialog","aria-modal":"true","aria-labelledby":`modal-title-${j}`,tabindex:"-1"},[p("div",{ref_key:"modalRef",ref:D,"data-testid":"modal-content",class:f(`relative w-full ${q.value.width} ${q.value.height} \n          flex flex-col bg-base-100 rounded-lg shadow-xl \n          ${r(Y)?"":"transition-all duration-300"} \n          p-4 sm:p-6 lg:p-8 ${a.className}`),tabindex:"-1"},[p("div",R,[p("h2",{id:`modal-title-${j}`,class:"text-xl sm:text-2xl font-semibold text-center flex-grow"},h(a.title),9,T),i(C,{ref_key:"expandButtonRef",ref:V,"is-expanded":a.isExpanded,onClick:a.onToggleExpand},null,8,["is-expanded","onClick"])]),K.value?(s(),g(N,{key:0,"on-previous":ee,"on-next":te,"prefers-reduced-motion":r(Y)},null,8,["prefers-reduced-motion"])):v("",!0),p("div",{ref_key:"contentRef",ref:A,class:f(`p-6 pb-10 flex-grow overflow-y-auto relative scroll-smooth\n            ${a.contentClassName}`),onScroll:t[0]||(t[0]=(...e)=>r(U)&&r(U)(...e)),role:"region","aria-label":"Modal content",tabindex:"0"},[w(e.$slots,"default"),W.value.isContentOverflowing&&W.value.scrollIndicatorVisible?(s(),g($,{key:0,"prefers-reduced-motion":r(Y),message:"Scroll down to see more"},null,8,["prefers-reduced-motion"])):v("",!0)],34),p("div",B,[p("button",{ref_key:"closeButtonRef",ref:F,class:"btn btn-sm btn-neutral",onClick:t[1]||(t[1]=(...e)=>a.onClose&&a.onClose(...e)),"aria-label":"Close modal"}," Close ",512)]),a.showNavigation&&W.value.showNavigationHint&&a.totalPages>1?(s(),l("div",_,[p("span",L,h(r(z)?"Swipe left or right to navigate":"Use ← → arrow keys to navigate"),1)])):v("",!0),a.totalPages>1?(s(),l("div",{key:2,class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-6 flex space-x-2",role:"navigation","aria-label":`Page ${a.currentPage+1} of ${a.totalPages}`},[(s(!0),l(c,null,y(a.totalPages,((e,t)=>(s(),l("div",{key:t,class:f("w-3 h-3 rounded-full transition-colors duration-200\n              "+(a.currentPage===t?"bg-info":"bg-neutral-content")),role:"tab","aria-selected":a.currentPage===t,"aria-label":`Page ${t+1}`,tabindex:"-1"},null,10,M)))),128))],8,H)):v("",!0)],2)],8,I)):v("",!0)]))}});export{S as _};
//# sourceMappingURL=Modal.vue_vue_type_script_setup_true_lang-BEagMkT0.js.map
