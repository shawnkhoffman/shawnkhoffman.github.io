import{w as e,a as t,d as o,r as n,b as a,h as l,v as s,u as i,I as r,c as d,F as u,g as c,n as v,e as p,t as f,K as m,o as h,f as g,T as x,z as b,q as w,s as y}from"./vendor-DdpTwOUg.js";import{a as k}from"./index-BsIlXJCv.js";function E(o=!0){e((()=>"boolean"==typeof o?o:o.value),(e=>{const t=document.body.style;if(e){const e=(()=>{const e=document.createElement("div");e.style.cssText="\n      width: 99px;\n      height: 99px;\n      overflow: scroll;\n      position: absolute;\n      top: -9999px;\n    ",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t})(),o=window.innerWidth>document.documentElement.clientWidth,n=window.scrollY;Object.assign(t,{overflow:"hidden",position:"fixed",top:`-${n}px`,left:"0",right:"0",bottom:"0",paddingRight:o?`${e}px`:"0"})}else{const e=t.top?-1*parseInt(t.top):0;t.overflow="",t.position="",t.top="",t.left="",t.right="",t.bottom="",t.paddingRight="",window.scrollTo(0,e)}}),{immediate:!0}),t((()=>{const e=document.body.style;e.overflow="",e.position="",e.top="",e.left="",e.right="",e.bottom="",e.paddingRight=""}))}const P=["aria-label","title"],N=o({__name:"ExpandButton",props:{isExpanded:{type:Boolean},onClick:{type:Function}},setup(e,{expose:t}){const o=n(null);return t({buttonRef:o}),(t,n)=>(l(),a("button",{ref_key:"buttonRef",ref:o,onClick:n[0]||(n[0]=(...t)=>e.onClick&&e.onClick(...t)),class:"text-xl p-2 hover:text-info focus:text-info focus:outline-none focus:ring-2 focus:ring-info rounded-lg transition-colors duration-200","aria-label":e.isExpanded?"Compress modal":"Expand modal",title:e.isExpanded?"Compress modal":"Expand modal"},[s(i(r),{icon:e.isExpanded?"fa6-solid:compress":"fa6-solid:expand",class:"transition-all duration-200","aria-hidden":"true"},null,8,["icon"])],8,P))}}),C=o({__name:"NavigationButtons",props:{onPrevious:{},onNext:{},showPrevious:{type:Boolean,default:!0},showNext:{type:Boolean,default:!0},prefersReducedMotion:{type:Boolean,default:!1}},setup(e){const t=e,o=d((()=>t.prefersReducedMotion?"":"hover:scale-110 transition-transform"));return(t,n)=>(l(),a(u,null,[e.showPrevious?(l(),a("button",{key:0,class:"absolute top-1/2 transform -translate-y-1/2 -translate-x-16 left-0 p-2 text-neutral-content hover:text-info focus:text-info focus:outline-none focus:ring-2 focus:ring-info rounded-lg hidden md:block cursor-pointer transition-colors duration-200",onClick:n[0]||(n[0]=(...t)=>e.onPrevious&&e.onPrevious(...t)),"aria-label":"Previous page",title:"Previous page"},[s(i(r),{icon:"fa6-solid:chevron-left",class:v(`text-5xl ${o.value}`),"aria-hidden":"true"},null,8,["class"])])):c("",!0),e.showNext?(l(),a("button",{key:1,class:"absolute top-1/2 transform -translate-y-1/2 translate-x-16 right-0 p-2 text-neutral-content hover:text-info focus:text-info focus:outline-none focus:ring-2 focus:ring-info rounded-lg hidden md:block cursor-pointer transition-colors duration-200",onClick:n[1]||(n[1]=(...t)=>e.onNext&&e.onNext(...t)),"aria-label":"Next page",title:"Next page"},[s(i(r),{icon:"fa6-solid:chevron-right",class:v(`text-5xl ${o.value}`),"aria-hidden":"true"},null,8,["class"])])):c("",!0)],64))}}),O={class:"absolute bottom-2 right-2 bg-base-200/90 p-2 rounded-lg flex items-center space-x-2 shadow-lg backdrop-blur-sm transition-opacity duration-200 hover:opacity-100",role:"status","aria-live":"polite"},L={class:"text-sm font-medium text-info"},I=o({__name:"ScrollIndicator",props:{prefersReducedMotion:{type:Boolean},message:{}},setup:e=>(t,o)=>(l(),a("div",O,[s(i(r),{icon:"fa6-solid:chevron-down",class:v("text-xl text-info "+(e.prefersReducedMotion?"":"animate-bounce")),"aria-hidden":"true"},null,8,["class"]),p("span",L,f(e.message),1)]))}),R=["aria-labelledby"],T={class:"p-4 border-b border-base-300 flex justify-between items-center"},$=["id"],_={class:"p-4 border-t border-base-300 flex justify-end space-x-2"},B={key:1,class:"absolute bottom-2 left-2 bg-base-200 p-2 rounded-lg flex items-center space-x-2",role:"status","aria-live":"polite"},M={class:"text-sm text-info"},H=["aria-label"],A=["aria-selected","aria-label"],D=((e,t)=>{const o=e.__vccOpts||e;for(const[n,a]of t)o[n]=a;return o})(o({__name:"Modal",props:{isOpen:{type:Boolean},onClose:{},title:{},onNext:{},onPrevious:{},totalPages:{default:1},currentPage:{default:0},showNavigation:{type:Boolean,default:!0},isExpanded:{type:Boolean},onToggleExpand:{},triggerOverflowCheck:{},className:{default:""},contentClassName:{default:""},closeOnEscape:{type:Boolean,default:!0},closeOnOutsideClick:{type:Boolean,default:!0},initialFocus:{default:"close"}},setup(o){const r=o,P=50,O=300,L=.3,D={expanded:{width:"max-w-[95vw] md:max-w-4xl lg:max-w-5xl",height:"h-[85vh]"},normal:{width:"max-w-[90vw] md:max-w-2xl lg:max-w-3xl",height:"h-[70vh] md:h-[60vh] lg:h-[50vh]"}},S=`modal-${Math.random().toString(36).substr(2,9)}`,j=n(null),F=n(null),V=n(null),W=n(null),Y=n({isContentOverflowing:!1,scrollIndicatorVisible:!0,showNavigationHint:!0,touchStart:{x:0,y:0,time:0},hasInteracted:!1}),z=k("(prefers-reduced-motion: reduce)"),K=k("(pointer: coarse)");E(d((()=>r.isOpen)));const X=d((()=>r.isExpanded?D.expanded:D.normal)),q=d((()=>r.showNavigation&&r.totalPages>1&&!K.value)),U=e=>{if(!r.closeOnOutsideClick)return;"modal-overlay"===e.target.dataset.testid&&r.onClose()},G=e=>{e.target===j.value&&e.preventDefault(),j.value&&j.value.blur()},J=()=>{if(F.value){const e=F.value.scrollHeight>F.value.clientHeight;Y.value.isContentOverflowing=e,Y.value.hasInteracted||(Y.value.scrollIndicatorVisible=e)}},Q=((e,t)=>{let o=0;return(...n)=>{const a=Date.now();a-o>=t&&(e(...n),o=a)}})((()=>{var e;(null==(e=F.value)?void 0:e.scrollTop)&&F.value.scrollTop>0&&(Y.value.scrollIndicatorVisible=!1,Y.value.hasInteracted=!0)}),100),Z=e=>{if(!F.value)return;const{deltaY:t}=e,{scrollTop:o,scrollHeight:n,clientHeight:a}=F.value,l=t<0,s=t>0,i=o<=0,r=Math.abs(o+a-n)<=1;(l&&i||s&&r)&&e.preventDefault()},ee=e=>{Y.value.touchStart={x:e.touches[0].clientX,y:e.touches[0].clientY,time:Date.now()}},te=e=>{const{x:t,y:o,time:n}=Y.value.touchStart,a=e.changedTouches[0].clientX-t,l=e.changedTouches[0].clientY-o,s=Date.now()-n,i=Math.abs(a)/s;Math.abs(a)>Math.abs(l)&&Math.abs(a)>P&&s<O&&i>L&&(a>0&&r.onPrevious?(r.onPrevious(),Y.value.showNavigationHint=!1,Y.value.hasInteracted=!0):a<0&&r.onNext&&(r.onNext(),Y.value.showNavigationHint=!1,Y.value.hasInteracted=!0))},oe=()=>{var e;null==(e=r.onPrevious)||e.call(r),Y.value.showNavigationHint=!1,Y.value.hasInteracted=!0},ne=()=>{var e;null==(e=r.onNext)||e.call(r),Y.value.showNavigationHint=!1,Y.value.hasInteracted=!0},ae=e=>{if(!r.isOpen)return;if("ArrowRight"!==e.key&&"ArrowLeft"!==e.key&&"Escape"!==e.key)return;const t=e.target;(!("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||null!==t.closest('input, textarea, [contenteditable="true"]'))||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)&&("ArrowRight"!==e.key?"ArrowLeft"!==e.key?"Escape"===e.key&&r.closeOnEscape&&(e.preventDefault(),e.stopPropagation(),r.onClose()):r.onPrevious&&r.totalPages>1&&(e.preventDefault(),e.stopPropagation(),r.onPrevious(),Y.value.showNavigationHint=!1,Y.value.hasInteracted=!0):r.onNext&&r.totalPages>1&&(e.preventDefault(),e.stopPropagation(),r.onNext(),Y.value.showNavigationHint=!1,Y.value.hasInteracted=!0))},le=e=>{var t;const o=null==(t=j.value)?void 0:t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!(null==o?void 0:o.length))return;const n=o[0],a=o[o.length-1];"Tab"===e.key&&(e.shiftKey&&document.activeElement===n?(e.preventDefault(),a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),n.focus()))},se=((e,t)=>{let o;const n=(...n)=>{clearTimeout(o),o=setTimeout((()=>e(...n)),t)};return n.cancel=()=>clearTimeout(o),n})(J,100);return function(o,n,a={}){let l=null;e((()=>o.value),(e=>{l&&(l.disconnect(),l=null),e&&(l=new ResizeObserver((()=>{n()})),l.observe(e,a))}),{immediate:!0}),t((()=>{l&&l.disconnect()}))}(F,J),e((()=>r.isOpen),(e=>{e?(document.addEventListener("keydown",ae,!0),document.addEventListener("keydown",le)):(document.removeEventListener("keydown",ae,!0),document.removeEventListener("keydown",le)),m((()=>{setTimeout((()=>{var e,t,o;switch(r.initialFocus){case"content":null==(e=F.value)||e.focus();break;case"expand":null==(o=null==(t=W.value)?void 0:t.$el)||o.focus();break;default:{const e=V.value;e&&!e.hasAttribute("disabled")?e.focus():j.value&&j.value.blur();break}}}),300)}))})),e((()=>r.isOpen),(e=>{e||(document.removeEventListener("keydown",ae,!0),document.removeEventListener("keydown",le))})),e((()=>[r.isOpen,r.currentPage,r.isExpanded,r.triggerOverflowCheck]),(()=>{r.isOpen&&(se(),j.value&&document.activeElement===j.value&&j.value.blur())})),h((()=>{F.value&&F.value.addEventListener("wheel",Z,{passive:!1}),r.isOpen&&(document.addEventListener("keydown",ae,!0),document.addEventListener("keydown",le))})),e((()=>r.isOpen),(e=>{const t=j.value;e?!t||!K.value||r.totalPages<=1||m((()=>{t&&(t.addEventListener("touchstart",ee,{passive:!0}),t.addEventListener("touchend",te,{passive:!0}))})):t&&(t.removeEventListener("touchstart",ee),t.removeEventListener("touchend",te))})),t((()=>{F.value&&F.value.removeEventListener("wheel",Z),j.value&&(j.value.removeEventListener("touchstart",ee),j.value.removeEventListener("touchend",te)),se.cancel(),document.removeEventListener("keydown",ae,!0),document.removeEventListener("keydown",le)})),(e,t)=>(l(),g(x,{to:"body"},[o.isOpen?(l(),a("div",{key:0,"data-testid":"modal-overlay",class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 pointer-events-auto overflow-hidden",onClick:U,role:"dialog","aria-modal":"true","aria-labelledby":`modal-title-${S}`,tabindex:"-1"},[p("div",{ref_key:"modalRef",ref:j,"data-testid":"modal-content",class:v(`relative w-full ${X.value.width} ${X.value.height} \n          flex flex-col bg-base-100 rounded-lg shadow-xl \n          ${i(z)?"":"transition-all duration-300"} \n          p-4 sm:p-6 lg:p-8 select-none outline-none ${o.className}`),onMousedown:y(G,["prevent"])},[p("div",T,[p("h2",{id:`modal-title-${S}`,class:"text-xl sm:text-2xl font-semibold text-center flex-grow"},f(o.title),9,$),s(N,{ref_key:"expandButtonRef",ref:W,"is-expanded":o.isExpanded,onClick:o.onToggleExpand},null,8,["is-expanded","onClick"])]),q.value?(l(),g(C,{key:0,"on-previous":oe,"on-next":ne,"prefers-reduced-motion":i(z)},null,8,["prefers-reduced-motion"])):c("",!0),p("div",{ref_key:"contentRef",ref:F,class:v(`p-6 pb-10 flex-grow overflow-y-auto relative scroll-smooth\n            ${o.contentClassName}`),onScroll:t[0]||(t[0]=(...e)=>i(Q)&&i(Q)(...e)),role:"region","aria-label":"Modal content",tabindex:"0"},[b(e.$slots,"default",{},void 0,!0),Y.value.isContentOverflowing&&Y.value.scrollIndicatorVisible?(l(),g(I,{key:0,"prefers-reduced-motion":i(z),message:"Scroll down to see more"},null,8,["prefers-reduced-motion"])):c("",!0)],34),p("div",_,[p("button",{ref_key:"closeButtonRef",ref:V,class:"btn btn-sm btn-neutral",onClick:t[1]||(t[1]=(...e)=>o.onClose&&o.onClose(...e)),"aria-label":"Close modal"}," Close ",512)]),o.showNavigation&&Y.value.showNavigationHint&&o.totalPages>1?(l(),a("div",B,[p("span",M,f(i(K)?"Swipe left or right to navigate":"Use ← → arrow keys to navigate"),1)])):c("",!0),o.totalPages>1?(l(),a("div",{key:2,class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-6 flex space-x-2",role:"navigation","aria-label":`Page ${o.currentPage+1} of ${o.totalPages}`},[(l(!0),a(u,null,w(o.totalPages,((e,t)=>(l(),a("div",{key:t,class:v("w-3 h-3 rounded-full transition-colors duration-200\n              "+(o.currentPage===t?"bg-info":"bg-neutral-content")),role:"tab","aria-selected":o.currentPage===t,"aria-label":`Page ${t+1}`,tabindex:"-1"},null,10,A)))),128))],8,H)):c("",!0)],34)],8,R)):c("",!0)]))}}),[["__scopeId","data-v-0ff80bd3"]]);export{D as M};
//# sourceMappingURL=Modal-Ds_5m_73.js.map
