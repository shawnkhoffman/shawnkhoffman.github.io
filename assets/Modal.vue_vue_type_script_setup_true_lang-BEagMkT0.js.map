{"version":3,"file":"Modal.vue_vue_type_script_setup_true_lang-BEagMkT0.js","sources":["../../src/composables/useLockedBody.ts","../../src/components/common/ExpandButton.vue","../../src/components/common/NavigationButtons.vue","../../src/components/common/ScrollIndicator.vue","../../src/components/common/Modal.vue","../../src/composables/useResizeObserver.ts"],"sourcesContent":["import { onUnmounted, watch, type Ref } from 'vue';\n\nexport default function useLockedBody(locked: Ref<boolean> | boolean = true): void {\n  const getScrollbarWidth = (): number => {\n    const scrollDiv = document.createElement('div');\n    scrollDiv.style.cssText = `\n      width: 99px;\n      height: 99px;\n      overflow: scroll;\n      position: absolute;\n      top: -9999px;\n    `;\n    document.body.appendChild(scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    document.body.removeChild(scrollDiv);\n    return scrollbarWidth;\n  };\n\n  watch(\n    () => (typeof locked === 'boolean' ? locked : locked.value),\n    (isLocked) => {\n      const bodyStyle = document.body.style;\n\n      if (isLocked) {\n        const scrollbarWidth = getScrollbarWidth();\n        const hasVerticalScroll = window.innerWidth > document.documentElement.clientWidth;\n        const scrollY = window.scrollY;\n\n        Object.assign(bodyStyle, {\n          overflow: 'hidden',\n          position: 'fixed',\n          top: `-${scrollY}px`,\n          left: '0',\n          right: '0',\n          bottom: '0',\n          paddingRight: hasVerticalScroll ? `${scrollbarWidth}px` : '0',\n        });\n      } else {\n        const scrollY = bodyStyle.top ? parseInt(bodyStyle.top) * -1 : 0;\n        bodyStyle.overflow = '';\n        bodyStyle.position = '';\n        bodyStyle.top = '';\n        bodyStyle.left = '';\n        bodyStyle.right = '';\n        bodyStyle.bottom = '';\n        bodyStyle.paddingRight = '';\n        window.scrollTo(0, scrollY);\n      }\n    },\n    { immediate: true }\n  );\n\n  onUnmounted(() => {\n    const bodyStyle = document.body.style;\n    bodyStyle.overflow = '';\n    bodyStyle.position = '';\n    bodyStyle.top = '';\n    bodyStyle.left = '';\n    bodyStyle.right = '';\n    bodyStyle.bottom = '';\n    bodyStyle.paddingRight = '';\n  });\n}\n\n","<template>\n  <button\n    ref=\"buttonRef\"\n    @click=\"onClick\"\n    class=\"text-xl p-2 hover:text-info focus:text-info focus:outline-none \n      focus:ring-2 focus:ring-info rounded-lg transition-colors duration-200\"\n    :aria-label=\"isExpanded ? 'Compress modal' : 'Expand modal'\"\n    :title=\"isExpanded ? 'Compress modal' : 'Expand modal'\"\n  >\n    <Icon\n      :icon=\"isExpanded ? 'fa6-solid:compress' : 'fa6-solid:expand'\"\n      class=\"transition-all duration-200\"\n      aria-hidden=\"true\"\n    />\n  </button>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { Icon } from '@iconify/vue';\n\ninterface Props {\n  isExpanded: boolean;\n  onClick: () => void;\n}\n\ndefineProps<Props>();\n\nconst buttonRef = ref<HTMLButtonElement | null>(null);\n\ndefineExpose({\n  buttonRef,\n});\n</script>\n\n","<template>\n  <button\n    v-if=\"showPrevious\"\n    class=\"absolute top-1/2 transform -translate-y-1/2 -translate-x-16 left-0 p-2 \n      text-neutral-content hover:text-info focus:text-info focus:outline-none \n      focus:ring-2 focus:ring-info rounded-lg hidden md:block\n      transition-colors duration-200\"\n    @click=\"onPrevious\"\n    aria-label=\"Previous page\"\n    title=\"Previous page\"\n  >\n    <Icon\n      icon=\"fa6-solid:chevron-left\"\n      :class=\"`text-5xl ${animationClass}`\"\n      aria-hidden=\"true\"\n    />\n  </button>\n  <button\n    v-if=\"showNext\"\n    class=\"absolute top-1/2 transform -translate-y-1/2 translate-x-16 right-0 p-2 \n      text-neutral-content hover:text-info focus:text-info focus:outline-none \n      focus:ring-2 focus:ring-info rounded-lg hidden md:block\n      transition-colors duration-200\"\n    @click=\"onNext\"\n    aria-label=\"Next page\"\n    title=\"Next page\"\n  >\n    <Icon\n      icon=\"fa6-solid:chevron-right\"\n      :class=\"`text-5xl ${animationClass}`\"\n      aria-hidden=\"true\"\n    />\n  </button>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { Icon } from '@iconify/vue';\n\ninterface Props {\n  onPrevious: () => void;\n  onNext: () => void;\n  showPrevious?: boolean;\n  showNext?: boolean;\n  prefersReducedMotion?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  showPrevious: true,\n  showNext: true,\n  prefersReducedMotion: false,\n});\n\nconst animationClass = computed(() => \n  props.prefersReducedMotion ? '' : 'hover:scale-110 transition-transform'\n);\n</script>\n\n","<template>\n  <div \n    class=\"absolute bottom-2 right-2 bg-base-200/90 p-2 rounded-lg \n      flex items-center space-x-2 shadow-lg backdrop-blur-sm\n      transition-opacity duration-200 hover:opacity-100\"\n    role=\"status\"\n    aria-live=\"polite\"\n  >\n    <Icon\n      icon=\"fa6-solid:chevron-down\"\n      :class=\"`text-xl text-info ${\n        prefersReducedMotion ? '' : 'animate-bounce'\n      }`\"\n      aria-hidden=\"true\"\n    />\n    <span class=\"text-sm font-medium text-info\">\n      {{ message }}\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { Icon } from '@iconify/vue';\n\ninterface Props {\n  prefersReducedMotion: boolean;\n  message: string;\n}\n\ndefineProps<Props>();\n</script>\n\n","<template>\n  <Teleport to=\"body\">\n    <div\n      v-if=\"isOpen\"\n      data-testid=\"modal-overlay\"\n      class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 pointer-events-auto overflow-hidden\"\n      @click=\"handleOutsideClick\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      :aria-labelledby=\"`modal-title-${modalId}`\"\n      tabindex=\"-1\"\n    >\n      <div\n        ref=\"modalRef\"\n        data-testid=\"modal-content\"\n        :class=\"`relative w-full ${modalSize.width} ${modalSize.height} \n          flex flex-col bg-base-100 rounded-lg shadow-xl \n          ${prefersReducedMotion ? '' : 'transition-all duration-300'} \n          p-4 sm:p-6 lg:p-8 ${className}`\"\n        tabindex=\"-1\"\n      >\n        <div class=\"p-4 border-b border-base-300 flex justify-between items-center\">\n          <h2\n            :id=\"`modal-title-${modalId}`\"\n            class=\"text-xl sm:text-2xl font-semibold text-center flex-grow\"\n          >\n            {{ title }}\n          </h2>\n\n          <ExpandButton\n            ref=\"expandButtonRef\"\n            :is-expanded=\"isExpanded\"\n            @click=\"onToggleExpand\"\n          />\n        </div>\n\n        <NavigationButtons\n          v-if=\"isNavigationEnabled\"\n          :on-previous=\"handlePrevious\"\n          :on-next=\"handleNext\"\n          :prefers-reduced-motion=\"prefersReducedMotion\"\n        />\n\n        <div\n          ref=\"contentRef\"\n          :class=\"`p-6 pb-10 flex-grow overflow-y-auto relative scroll-smooth\n            ${contentClassName}`\"\n          @scroll=\"handleScroll\"\n          role=\"region\"\n          aria-label=\"Modal content\"\n          tabindex=\"0\"\n        >\n          <slot />\n\n          <ScrollIndicator\n            v-if=\"state.isContentOverflowing && state.scrollIndicatorVisible\"\n            :prefers-reduced-motion=\"prefersReducedMotion\"\n            message=\"Scroll down to see more\"\n          />\n        </div>\n\n        <div class=\"p-4 border-t border-base-300 flex justify-end space-x-2\">\n          <button\n            ref=\"closeButtonRef\"\n            class=\"btn btn-sm btn-neutral\"\n            @click=\"onClose\"\n            aria-label=\"Close modal\"\n          >\n            Close\n          </button>\n        </div>\n\n        <div\n          v-if=\"showNavigation && state.showNavigationHint && totalPages > 1\"\n          class=\"absolute bottom-2 left-2 bg-base-200 p-2 rounded-lg flex items-center space-x-2\"\n          role=\"status\"\n          aria-live=\"polite\"\n        >\n          <span class=\"text-sm text-info\">\n            {{ isTouchDevice\n              ? 'Swipe left or right to navigate'\n              : 'Use ← → arrow keys to navigate' }}\n          </span>\n        </div>\n\n        <div\n          v-if=\"totalPages > 1\"\n          class=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-6 flex space-x-2\"\n          role=\"navigation\"\n          :aria-label=\"`Page ${currentPage + 1} of ${totalPages}`\"\n        >\n          <div\n            v-for=\"(_, index) in totalPages\"\n            :key=\"index\"\n            :class=\"`w-3 h-3 rounded-full transition-colors duration-200\n              ${currentPage === index ? 'bg-info' : 'bg-neutral-content'}`\"\n            role=\"tab\"\n            :aria-selected=\"currentPage === index\"\n            :aria-label=\"`Page ${index + 1}`\"\n            tabindex=\"-1\"\n          />\n        </div>\n      </div>\n    </div>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted, onUnmounted, nextTick } from 'vue';\nimport { useMediaQuery } from '@/composables/useMediaQuery';\nimport useLockedBody from '@/composables/useLockedBody';\nimport useResizeObserver from '@/composables/useResizeObserver';\nimport ExpandButton from './ExpandButton.vue';\nimport NavigationButtons from './NavigationButtons.vue';\nimport ScrollIndicator from './ScrollIndicator.vue';\n\nexport interface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  onNext?: () => void;\n  onPrevious?: () => void;\n  totalPages?: number;\n  currentPage?: number;\n  showNavigation?: boolean;\n  isExpanded: boolean;\n  onToggleExpand: () => void;\n  triggerOverflowCheck: number;\n  className?: string;\n  contentClassName?: string;\n  closeOnEscape?: boolean;\n  closeOnOutsideClick?: boolean;\n  initialFocus?: 'close' | 'expand' | 'content';\n}\n\nconst props = withDefaults(defineProps<ModalProps>(), {\n  totalPages: 1,\n  currentPage: 0,\n  showNavigation: true,\n  className: '',\n  contentClassName: '',\n  closeOnEscape: true,\n  closeOnOutsideClick: true,\n  initialFocus: 'close',\n});\n\nconst SWIPE_CONFIG = {\n  minDistance: 50,\n  maxTime: 300,\n  minVelocity: 0.3,\n} as const;\n\nconst MODAL_SIZES = {\n  expanded: {\n    width: 'max-w-[95vw] md:max-w-4xl lg:max-w-5xl',\n    height: 'h-[85vh]',\n  },\n  normal: {\n    width: 'max-w-[90vw] md:max-w-2xl lg:max-w-3xl',\n    height: 'h-[70vh] md:h-[60vh] lg:h-[50vh]',\n  },\n} as const;\n\nconst TRANSITION_DURATION = 300;\nconst SCROLL_THROTTLE = 100;\nconst RESIZE_DEBOUNCE = 100;\n\nconst modalId = `modal-${Math.random().toString(36).substr(2, 9)}`;\nconst modalRef = ref<HTMLDivElement | null>(null);\nconst contentRef = ref<HTMLDivElement | null>(null);\nconst closeButtonRef = ref<HTMLButtonElement | null>(null);\nconst expandButtonRef = ref<InstanceType<typeof ExpandButton> | null>(null);\n\nconst state = ref({\n  isContentOverflowing: false,\n  scrollIndicatorVisible: true,\n  showNavigationHint: true,\n  touchStart: { x: 0, y: 0, time: 0 },\n  hasInteracted: false,\n});\n\nconst prefersReducedMotion = useMediaQuery('(prefers-reduced-motion: reduce)');\nconst isTouchDevice = useMediaQuery('(pointer: coarse)');\n\nuseLockedBody(computed(() => props.isOpen));\n\nconst modalSize = computed(() => \n  props.isExpanded ? MODAL_SIZES.expanded : MODAL_SIZES.normal\n);\n\nconst isNavigationEnabled = computed(\n  () => props.showNavigation && props.totalPages > 1 && !isTouchDevice.value\n);\n\nconst debounce = <T extends (...args: unknown[]) => void>(\n  fn: T,\n  ms: number\n): ((...args: Parameters<T>) => void) & { cancel: () => void } => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n\n  const debouncedFn = (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(...args), ms);\n  };\n\n  debouncedFn.cancel = () => clearTimeout(timeoutId);\n\n  return debouncedFn;\n};\n\nconst throttle = <T extends (...args: unknown[]) => void>(\n  fn: T,\n  ms: number\n): ((...args: Parameters<T>) => void) => {\n  let lastCall = 0;\n\n  return (...args: Parameters<T>) => {\n    const now = Date.now();\n    if (now - lastCall >= ms) {\n      fn(...args);\n      lastCall = now;\n    }\n  };\n};\n\nconst handleOutsideClick = (e: MouseEvent) => {\n  if (!props.closeOnOutsideClick) return;\n  \n  const target = e.target as HTMLElement;\n  if (target.dataset.testid === 'modal-overlay') {\n    props.onClose();\n  }\n};\n\nconst checkContentOverflow = () => {\n  if (contentRef.value) {\n    const isOverflowing =\n      contentRef.value.scrollHeight > contentRef.value.clientHeight;\n    state.value.isContentOverflowing = isOverflowing;\n    if (!state.value.hasInteracted) {\n      state.value.scrollIndicatorVisible = isOverflowing;\n    }\n  }\n};\n\nconst handleScroll = throttle(() => {\n  if (contentRef.value?.scrollTop && contentRef.value.scrollTop > 0) {\n    state.value.scrollIndicatorVisible = false;\n    state.value.hasInteracted = true;\n  }\n}, SCROLL_THROTTLE);\n\nconst preventScrollPropagation = (e: WheelEvent) => {\n  if (!contentRef.value) return;\n\n  const { deltaY } = e;\n  const { scrollTop, scrollHeight, clientHeight } = contentRef.value;\n  const isScrollingUp = deltaY < 0;\n  const isScrollingDown = deltaY > 0;\n  const isAtTop = scrollTop <= 0;\n  const isAtBottom = Math.abs(scrollTop + clientHeight - scrollHeight) <= 1;\n\n  if ((isScrollingUp && isAtTop) || (isScrollingDown && isAtBottom)) {\n    e.preventDefault();\n  }\n};\n\nconst handleTouchStart = (e: TouchEvent) => {\n  state.value.touchStart = {\n    x: e.touches[0].clientX,\n    y: e.touches[0].clientY,\n    time: Date.now(),\n  };\n};\n\nconst handleTouchEnd = (e: TouchEvent) => {\n  const { x: startX, y: startY, time: startTime } = state.value.touchStart;\n  const touchEndX = e.changedTouches[0].clientX;\n  const touchEndY = e.changedTouches[0].clientY;\n  const touchEndTime = Date.now();\n\n  const deltaX = touchEndX - startX;\n  const deltaY = touchEndY - startY;\n  const deltaTime = touchEndTime - startTime;\n  const velocity = Math.abs(deltaX) / deltaTime;\n\n  if (\n    Math.abs(deltaX) > Math.abs(deltaY) &&\n    Math.abs(deltaX) > SWIPE_CONFIG.minDistance &&\n    deltaTime < SWIPE_CONFIG.maxTime &&\n    velocity > SWIPE_CONFIG.minVelocity\n  ) {\n    if (deltaX > 0 && props.onPrevious) {\n      props.onPrevious();\n      state.value.showNavigationHint = false;\n      state.value.hasInteracted = true;\n    } else if (deltaX < 0 && props.onNext) {\n      props.onNext();\n      state.value.showNavigationHint = false;\n      state.value.hasInteracted = true;\n    }\n  }\n};\n\nconst handlePrevious = () => {\n  props.onPrevious?.();\n  state.value.showNavigationHint = false;\n  state.value.hasInteracted = true;\n};\n\nconst handleNext = () => {\n  props.onNext?.();\n  state.value.showNavigationHint = false;\n  state.value.hasInteracted = true;\n};\n\nconst handleKeyDown = (e: KeyboardEvent) => {\n  switch (e.key) {\n    case 'ArrowRight':\n      if (props.onNext) {\n        props.onNext();\n        state.value.showNavigationHint = false;\n        state.value.hasInteracted = true;\n      }\n      break;\n    case 'ArrowLeft':\n      if (props.onPrevious) {\n        props.onPrevious();\n        state.value.showNavigationHint = false;\n        state.value.hasInteracted = true;\n      }\n      break;\n    case 'Escape':\n      if (props.closeOnEscape) {\n        props.onClose();\n      }\n      break;\n    default:\n      break;\n  }\n};\n\nconst focusTrap = (e: KeyboardEvent) => {\n  const focusableElements = modalRef.value?.querySelectorAll<HTMLElement>(\n    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n  );\n\n  if (!focusableElements?.length) return;\n\n  const firstElement = focusableElements[0];\n  const lastElement = focusableElements[focusableElements.length - 1];\n\n  if (e.key === 'Tab') {\n    if (e.shiftKey && document.activeElement === firstElement) {\n      e.preventDefault();\n      lastElement.focus();\n    } else if (!e.shiftKey && document.activeElement === lastElement) {\n      e.preventDefault();\n      firstElement.focus();\n    }\n  }\n};\n\nconst debouncedCheckContentOverflow = debounce(checkContentOverflow, RESIZE_DEBOUNCE);\n\nuseResizeObserver(contentRef, checkContentOverflow);\n\nwatch(() => props.isOpen, (open) => {\n  if (!open) return;\n\n  document.addEventListener('keydown', handleKeyDown);\n  document.addEventListener('keydown', focusTrap);\n\n  nextTick(() => {\n    setTimeout(() => {\n      switch (props.initialFocus) {\n        case 'content': {\n          contentRef.value?.focus();\n          break;\n        }\n        case 'expand': {\n          expandButtonRef.value?.$el?.focus();\n          break;\n        }\n        case 'close':\n        default: {\n          const closeBtn = closeButtonRef.value;\n          if (closeBtn && !closeBtn.hasAttribute('disabled')) {\n            closeBtn.focus();\n          } else {\n            modalRef.value?.focus();\n          }\n          break;\n        }\n      }\n    }, TRANSITION_DURATION);\n  });\n});\n\nwatch(() => props.isOpen, (open) => {\n  if (!open) {\n    document.removeEventListener('keydown', handleKeyDown);\n    document.removeEventListener('keydown', focusTrap);\n  }\n});\n\nwatch(\n  () => [props.isOpen, props.currentPage, props.isExpanded, props.triggerOverflowCheck],\n  () => {\n    if (props.isOpen) {\n      debouncedCheckContentOverflow();\n    }\n  }\n);\n\nonMounted(() => {\n  if (contentRef.value) {\n    contentRef.value.addEventListener('wheel', preventScrollPropagation, { passive: false });\n  }\n\n  watch(() => props.isOpen, (open) => {\n    const modalElement = modalRef.value;\n    if (!open || !modalElement || !isTouchDevice.value) return;\n\n    modalElement.addEventListener('touchstart', handleTouchStart, { passive: true });\n    modalElement.addEventListener('touchend', handleTouchEnd, { passive: true });\n\n    return () => {\n      modalElement.removeEventListener('touchstart', handleTouchStart);\n      modalElement.removeEventListener('touchend', handleTouchEnd);\n    };\n  });\n});\n\nonUnmounted(() => {\n  if (contentRef.value) {\n    contentRef.value.removeEventListener('wheel', preventScrollPropagation);\n  }\n  debouncedCheckContentOverflow.cancel();\n  document.removeEventListener('keydown', handleKeyDown);\n  document.removeEventListener('keydown', focusTrap);\n});\n</script>\n\n","import { watch, onUnmounted, type Ref } from 'vue';\n\ntype ObserverCallback = () => void;\n\nexport default function useResizeObserver(\n  ref: Ref<Element | HTMLElement | null>,\n  callback: ObserverCallback,\n  options: ResizeObserverOptions = {}\n) {\n  let observer: ResizeObserver | null = null;\n\n  watch(\n    () => ref.value,\n    (element) => {\n      if (observer) {\n        observer.disconnect();\n        observer = null;\n      }\n\n      if (element) {\n        observer = new ResizeObserver(() => {\n          callback();\n        });\n        observer.observe(element, options);\n      }\n    },\n    { immediate: true }\n  );\n\n  onUnmounted(() => {\n    if (observer) {\n      observer.disconnect();\n    }\n  });\n}\n\n"],"names":["useLockedBody","locked","watch","value","isLocked","bodyStyle","document","body","style","scrollbarWidth","scrollDiv","createElement","cssText","appendChild","offsetWidth","clientWidth","removeChild","getScrollbarWidth","hasVerticalScroll","window","innerWidth","documentElement","scrollY","Object","assign","overflow","position","top","left","right","bottom","paddingRight","parseInt","scrollTo","immediate","onUnmounted","buttonRef","ref","__expose","_createElementBlock","onClick","_cache","__props","args","class","isExpanded","title","_createVNode","_unref","Icon","icon","props","animationClass","computed","prefersReducedMotion","showPrevious","onPrevious","showNext","onNext","_openBlock","_hoisted_1","_normalizeClass","_createElementVNode","_hoisted_2","_toDisplayString","message","SWIPE_CONFIG","MODAL_SIZES","expanded","width","height","normal","modalId","Math","random","toString","substr","modalRef","contentRef","closeButtonRef","expandButtonRef","state","isContentOverflowing","scrollIndicatorVisible","showNavigationHint","touchStart","x","y","time","hasInteracted","useMediaQuery","isTouchDevice","isOpen","modalSize","isNavigationEnabled","showNavigation","totalPages","handleOutsideClick","e","closeOnOutsideClick","target","dataset","testid","onClose","checkContentOverflow","isOverflowing","scrollHeight","clientHeight","handleScroll","fn","ms","lastCall","now","Date","throttle","_a","scrollTop","preventScrollPropagation","deltaY","isScrollingUp","isScrollingDown","isAtTop","isAtBottom","abs","preventDefault","handleTouchStart","touches","clientX","clientY","handleTouchEnd","startX","startY","startTime","deltaX","changedTouches","deltaTime","velocity","handlePrevious","call","handleNext","handleKeyDown","key","closeOnEscape","focusTrap","focusableElements","querySelectorAll","length","firstElement","lastElement","shiftKey","activeElement","focus","debouncedCheckContentOverflow","timeoutId","debouncedFn","clearTimeout","setTimeout","cancel","debounce","callback","options","observer","element","disconnect","ResizeObserver","observe","useResizeObserver","open","addEventListener","nextTick","initialFocus","_c","_b","$el","closeBtn","hasAttribute","_d","removeEventListener","currentPage","triggerOverflowCheck","onMounted","passive","modalElement","_createBlock","_Teleport","to","role","tabindex","className","id","_hoisted_3","ExpandButton","onToggleExpand","NavigationButtons","contentClassName","onScroll","_renderSlot","_ctx","$slots","ScrollIndicator","_hoisted_4","_hoisted_5","_hoisted_6","_Fragment","_renderList","_","index"],"mappings":"6NAEwB,SAAAA,EAAcC,GAAiC,GAgBrEC,GACE,IAAyB,kBAAXD,EAAuBA,EAASA,EAAOE,QACpDC,IACO,MAAAC,EAAYC,SAASC,KAAKC,MAEhC,GAAIJ,EAAU,CACZ,MAAMK,EArBc,MAClB,MAAAC,EAAYJ,SAASK,cAAc,OACzCD,EAAUF,MAAMI,QAAU,2HAOjBN,SAAAC,KAAKM,YAAYH,GACpB,MAAAD,EAAiBC,EAAUI,YAAcJ,EAAUK,YAElD,OADET,SAAAC,KAAKS,YAAYN,GACnBD,CAAA,EASoBQ,GACjBC,EAAoBC,OAAOC,WAAad,SAASe,gBAAgBN,YACjEO,EAAUH,OAAOG,QAEvBC,OAAOC,OAAOnB,EAAW,CACvBoB,SAAU,SACVC,SAAU,QACVC,IAAK,IAAIL,MACTM,KAAM,IACNC,MAAO,IACPC,OAAQ,IACRC,aAAcb,EAAoB,GAAGT,MAAqB,KAC3D,KACI,CACL,MAAMa,EAAUjB,EAAUsB,KAAqC,EAA/BK,SAAS3B,EAAUsB,KAAY,EAC/DtB,EAAUoB,SAAW,GACrBpB,EAAUqB,SAAW,GACrBrB,EAAUsB,IAAM,GAChBtB,EAAUuB,KAAO,GACjBvB,EAAUwB,MAAQ,GAClBxB,EAAUyB,OAAS,GACnBzB,EAAU0B,aAAe,GAClBZ,OAAAc,SAAS,EAAGX,EAAO,IAG9B,CAAEY,WAAW,IAGfC,GAAY,KACJ,MAAA9B,EAAYC,SAASC,KAAKC,MAChCH,EAAUoB,SAAW,GACrBpB,EAAUqB,SAAW,GACrBrB,EAAUsB,IAAM,GAChBtB,EAAUuB,KAAO,GACjBvB,EAAUwB,MAAQ,GAClBxB,EAAUyB,OAAS,GACnBzB,EAAU0B,aAAe,EAAA,GAE7B,yIClCM,MAAAK,EAAYC,EAA8B,aAEnCC,EAAA,CACXF,0BA9BAG,EAaS,SAAA,SAZH,YAAJF,IAAID,EACHI,QAAKC,EAAA,KAAAA,EAAA,WAAEC,EAAOF,SAAAE,EAAAF,WAAAG,IACfC,MAAM,wIAEL,aAAYF,EAAUG,WAAA,iBAAA,eACtBC,MAAOJ,EAAUG,WAAA,iBAAA,iBAElBE,EAIEC,EAAAC,GAAA,CAHCC,KAAMR,EAAUG,WAAA,qBAAA,mBACjBD,MAAM,8BACN,cAAY,qOCmClB,MAAMO,EAAQT,EAMRU,EAAiBC,GAAS,IAC9BF,EAAMG,qBAAuB,GAAK,qEApD1BZ,EAAYa,kBADpBhB,EAeS,SAAA,OAbPK,MAAM,wOAILJ,QAAKC,EAAA,KAAAA,EAAA,WAAEC,EAAUc,YAAAd,EAAAc,cAAAb,IAClB,aAAW,gBACXG,MAAM,kBAENC,EAIEC,EAAAC,GAAA,CAHAC,KAAK,yBACJN,oBAAmBQ,EAAcjD,SAClC,cAAY,sCAIRuC,EAAQe,cADhBlB,EAeS,SAAA,OAbPK,MAAM,wOAILJ,QAAKC,EAAA,KAAAA,EAAA,WAAEC,EAAMgB,QAAAhB,EAAAgB,UAAAf,IACd,aAAW,YACXG,MAAM,cAENC,EAIEC,EAAAC,GAAA,CAHAC,KAAK,0BACJN,oBAAmBQ,EAAcjD,SAClC,cAAY,+YC7BhBwD,IAAApB,EAiBM,MAjBNqB,EAiBM,CAVJb,EAMEC,EAAAC,GAAA,CALAC,KAAK,yBACJN,MAAKiB,EAAA,sBAAgCnB,EAAoBY,qBAAA,GAAA,mBAG1D,cAAY,0BAEdQ,EAEO,OAFPC,EAEOC,EADFtB,EAAOuB,SAAA,wzBCuHhB,MAAMd,EAAQT,EAWRwB,EACS,GADTA,EAEK,IAFLA,EAGS,GAGTC,EAAc,CAClBC,SAAU,CACRC,MAAO,yCACPC,OAAQ,YAEVC,OAAQ,CACNF,MAAO,yCACPC,OAAQ,qCAQNE,EAAU,SAASC,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,KACxDC,EAAWxC,EAA2B,MACtCyC,EAAazC,EAA2B,MACxC0C,EAAiB1C,EAA8B,MAC/C2C,EAAkB3C,EAA8C,MAEhE4C,EAAQ5C,EAAI,CAChB6C,sBAAsB,EACtBC,wBAAwB,EACxBC,oBAAoB,EACpBC,WAAY,CAAEC,EAAG,EAAGC,EAAG,EAAGC,KAAM,GAChCC,eAAe,IAGXnC,EAAuBoC,EAAc,oCACrCC,EAAgBD,EAAc,qBAEpC1F,EAAcqD,GAAS,IAAMF,EAAMyC,UAEnC,MAAMC,EAAYxC,GAAS,IACzBF,EAAMN,WAAasB,EAAYC,SAAWD,EAAYI,SAGlDuB,EAAsBzC,GAC1B,IAAMF,EAAM4C,gBAAkB5C,EAAM6C,WAAa,IAAML,EAAcxF,QAkCjE8F,EAAsBC,IACtB,IAAC/C,EAAMgD,oBAAqB,OAGF,kBADfD,EAAEE,OACNC,QAAQC,QACjBnD,EAAMoD,SAAQ,EAIZC,EAAuB,KAC3B,GAAI1B,EAAW3E,MAAO,CACpB,MAAMsG,EACJ3B,EAAW3E,MAAMuG,aAAe5B,EAAW3E,MAAMwG,aACnD1B,EAAM9E,MAAM+E,qBAAuBuB,EAC9BxB,EAAM9E,MAAMsF,gBACfR,EAAM9E,MAAMgF,uBAAyBsB,EACvC,GAIEG,EAnCW,EACfC,EACAC,KAEA,IAAIC,EAAW,EAEf,MAAO,IAAIpE,KACH,MAAAqE,EAAMC,KAAKD,MACbA,EAAMD,GAAYD,IACpBD,KAAMlE,GACKoE,EAAAC,EAAA,CAEf,EAuBmBE,EAAS,YACxB,OAAAC,IAAWhH,YAAX,EAAAgH,EAAkBC,YAAatC,EAAW3E,MAAMiH,UAAY,IAC9DnC,EAAM9E,MAAMgF,wBAAyB,EACrCF,EAAM9E,MAAMsF,eAAgB,EAAA,GApFR,KAwFlB4B,EAA4BnB,IAC5B,IAACpB,EAAW3E,MAAO,OAEjB,MAAAmH,OAAEA,GAAWpB,GACbkB,UAAEA,EAAAV,aAAWA,EAAcC,aAAAA,GAAiB7B,EAAW3E,MACvDoH,EAAgBD,EAAS,EACzBE,EAAkBF,EAAS,EAC3BG,EAAUL,GAAa,EACvBM,EAAajD,KAAKkD,IAAIP,EAAYT,EAAeD,IAAiB,GAEnEa,GAAiBE,GAAaD,GAAmBE,IACpDxB,EAAE0B,gBAAe,EAIfC,EAAoB3B,IACxBjB,EAAM9E,MAAMkF,WAAa,CACvBC,EAAGY,EAAE4B,QAAQ,GAAGC,QAChBxC,EAAGW,EAAE4B,QAAQ,GAAGE,QAChBxC,KAAMyB,KAAKD,MACb,EAGIiB,EAAkB/B,IAChB,MAAEZ,EAAG4C,EAAQ3C,EAAG4C,EAAQ3C,KAAM4C,GAAcnD,EAAM9E,MAAMkF,WAKxDgD,EAJYnC,EAAEoC,eAAe,GAAGP,QAIXG,EACrBZ,EAJYpB,EAAEoC,eAAe,GAAGN,QAIXG,EACrBI,EAJetB,KAAKD,MAIOoB,EAC3BI,EAAW/D,KAAKkD,IAAIU,GAAUE,EAGlC9D,KAAKkD,IAAIU,GAAU5D,KAAKkD,IAAIL,IAC5B7C,KAAKkD,IAAIU,GAAUnE,GACnBqE,EAAYrE,GACZsE,EAAWtE,IAEPmE,EAAS,GAAKlF,EAAMK,YACtBL,EAAMK,aACNyB,EAAM9E,MAAMiF,oBAAqB,EACjCH,EAAM9E,MAAMsF,eAAgB,GACnB4C,EAAS,GAAKlF,EAAMO,SAC7BP,EAAMO,SACNuB,EAAM9E,MAAMiF,oBAAqB,EACjCH,EAAM9E,MAAMsF,eAAgB,GAC9B,EAIEgD,GAAiB,WACrB,OAAAtB,EAAAhE,EAAMK,aAAN2D,EAAAuB,KAAAvF,GACA8B,EAAM9E,MAAMiF,oBAAqB,EACjCH,EAAM9E,MAAMsF,eAAgB,CAAA,EAGxBkD,GAAa,WACjB,OAAAxB,EAAAhE,EAAMO,SAANyD,EAAAuB,KAAAvF,GACA8B,EAAM9E,MAAMiF,oBAAqB,EACjCH,EAAM9E,MAAMsF,eAAgB,CAAA,EAGxBmD,GAAiB1C,IACrB,OAAQA,EAAE2C,KACR,IAAK,aACC1F,EAAMO,SACRP,EAAMO,SACNuB,EAAM9E,MAAMiF,oBAAqB,EACjCH,EAAM9E,MAAMsF,eAAgB,GAE9B,MACF,IAAK,YACCtC,EAAMK,aACRL,EAAMK,aACNyB,EAAM9E,MAAMiF,oBAAqB,EACjCH,EAAM9E,MAAMsF,eAAgB,GAE9B,MACF,IAAK,SACCtC,EAAM2F,eACR3F,EAAMoD,UAIR,EAIAwC,GAAa7C,UACX,MAAA8C,EAAoB,OAAA7B,EAAStC,EAAA1E,YAAO,EAAAgH,EAAA8B,iBACxC,4EAGE,WAACD,WAAmBE,QAAQ,OAE1B,MAAAC,EAAeH,EAAkB,GACjCI,EAAcJ,EAAkBA,EAAkBE,OAAS,GAEnD,QAAVhD,EAAE2C,MACA3C,EAAEmD,UAAY/I,SAASgJ,gBAAkBH,GAC3CjD,EAAE0B,iBACFwB,EAAYG,SACFrD,EAAEmD,UAAY/I,SAASgJ,gBAAkBF,IACnDlD,EAAE0B,iBACFuB,EAAaI,SACf,EAIEC,GAzKW,EACf3C,EACAC,KAEI,IAAA2C,EAEE,MAAAC,EAAc,IAAI/G,KACtBgH,aAAaF,GACbA,EAAYG,YAAW,IAAM/C,KAAMlE,IAAOmE,EAAE,EAKvC,OAFK4C,EAAAG,OAAS,IAAMF,aAAaF,GAEjCC,CAAA,EA4J6BI,CAAStD,EAtMvB,YCjKxB,SACEnE,EACA0H,EACAC,EAAiC,CAAA,GAEjC,IAAIC,EAAkC,KAEtC/J,GACE,IAAMmC,EAAIlC,QACT+J,IACKD,IACFA,EAASE,aACEF,EAAA,MAGTC,IACSD,EAAA,IAAIG,gBAAe,KACnBL,GAAA,IAEFE,EAAAI,QAAQH,EAASF,GAAO,GAGrC,CAAE9H,WAAW,IAGfC,GAAY,KACN8H,GACFA,EAASE,YAAW,GAG1B,CD2UAG,CAAkBxF,EAAY0B,GAE9BtG,GAAM,IAAMiD,EAAMyC,SAAS2E,IACpBA,IAEIjK,SAAAkK,iBAAiB,UAAW5B,IAC5BtI,SAAAkK,iBAAiB,UAAWzB,IAErC0B,GAAS,KACPb,YAAW,iBACT,OAAQzG,EAAMuH,cACZ,IAAK,UACH,OAAAvD,EAAArC,EAAW3E,QAAOgH,EAAAoC,QAClB,MAEF,IAAK,SACa,OAAAoB,EAAA,OAAAC,EAAA5F,EAAA7E,YAAO,EAAAyK,EAAAC,MAAKF,EAAApB,QAC5B,MAGF,QAAS,CACP,MAAMuB,EAAW/F,EAAe5E,MAC5B2K,IAAaA,EAASC,aAAa,YACrCD,EAASvB,QAET,OAAAyB,EAAAnG,EAAS1E,QAAO6K,EAAAzB,QAElB,KAAA,EACF,GAtOoB,IAwOF,IACvB,IAGHrJ,GAAM,IAAMiD,EAAMyC,SAAS2E,IACpBA,IACMjK,SAAA2K,oBAAoB,UAAWrC,IAC/BtI,SAAA2K,oBAAoB,UAAWlC,IAAS,IAIrD7I,GACE,IAAM,CAACiD,EAAMyC,OAAQzC,EAAM+H,YAAa/H,EAAMN,WAAYM,EAAMgI,wBAChE,KACMhI,EAAMyC,QACsB4D,IAAA,IAKpC4B,GAAU,KACJtG,EAAW3E,OACb2E,EAAW3E,MAAMqK,iBAAiB,QAASnD,EAA0B,CAAEgE,SAAS,IAGlFnL,GAAM,IAAMiD,EAAMyC,SAAS2E,IACzB,MAAMe,EAAezG,EAAS1E,MAC9B,GAAKoK,GAASe,GAAiB3F,EAAcxF,MAK7C,OAHAmL,EAAad,iBAAiB,aAAc3C,EAAkB,CAAEwD,SAAS,IACzEC,EAAad,iBAAiB,WAAYvC,EAAgB,CAAEoD,SAAS,IAE9D,KACQC,EAAAL,oBAAoB,aAAcpD,GAClCyD,EAAAL,oBAAoB,WAAYhD,EAAc,CAC7D,GACD,IAGH9F,GAAY,KACN2C,EAAW3E,OACF2E,EAAA3E,MAAM8K,oBAAoB,QAAS5D,GAEhDmC,GAA8BK,SACrBvJ,SAAA2K,oBAAoB,UAAWrC,IAC/BtI,SAAA2K,oBAAoB,UAAWlC,GAAS,gBAvbjDwC,EAuGWC,EAAA,CAvGDC,GAAG,QAAM,CAET/I,EAAMkD,YADdrD,EAqGM,MAAA,OAnGJ,cAAY,gBACZK,MAAM,0GACLJ,QAAOyD,EACRyF,KAAK,SACL,aAAW,OACV,iCAAgClH,IACjCmH,SAAS,OAET7H,EA0FM,MAAA,SAzFA,WAAJzB,IAAIwC,EACJ,cAAY,gBACXjC,2BAA0BiD,EAAS1F,MAACkE,SAASwB,EAAA1F,MAAUmE,iFAA+EtB,EAAoBM,GAAA,GAAA,+DAAsEZ,EAASkJ,aAI1OD,SAAS,OAET7H,EAaM,MAbNC,EAaM,CAZJD,EAKK,KAAA,CAJF+H,kBAAmBrH,IACpB5B,MAAM,6DAEHF,EAAKI,OAAA,EAAAgJ,GAGV/I,EAIEgJ,EAAA,SAHI,kBAAJ1J,IAAI2C,EACH,cAAatC,EAAUG,WACvBL,QAAOE,EAAcsJ,oDAKlBlG,EAAmB3F,WAD3BoL,EAKEU,EAAA,OAHC,cAAaxD,GACb,UAASE,GACT,yBAAwB3F,EAAoBM,iDAG/CQ,EAgBM,MAAA,SAfA,aAAJzB,IAAIyC,EACHlC,MAAKiB,EAAA,2EAA4EnB,EAAgBwJ,oBAEjGC,SAAM1J,EAAA,KAAAA,EAAA,WAAEO,EAAY4D,IAAA5D,EAAA4D,EAAA5D,IAAAL,IACrB+I,KAAK,SACL,aAAW,gBACXC,SAAS,MAETS,EAAQC,EAAAC,OAAA,WAGArH,EAAA9E,MAAM+E,sBAAwBD,EAAA9E,MAAMgF,4BAD5CoG,EAIEgB,EAAA,OAFC,yBAAwBvJ,EAAoBM,GAC7CW,QAAQ,6EAIZH,EASM,MATN0I,EASM,CARJ1I,EAOS,SAAA,SANH,iBAAJzB,IAAI0C,EACJnC,MAAM,yBACLJ,QAAKC,EAAA,KAAAA,EAAA,WAAEC,EAAO6D,SAAA7D,EAAA6D,WAAA5D,IACf,aAAW,eACZ,UAED,OAIMD,EAAAqD,gBAAkBd,EAAA9E,MAAMiF,oBAAsB1C,EAAUsD,WAAA,GADhErC,IAAApB,EAWM,MAXNkK,EAWM,CALJ3I,EAIO,OAJP4I,EAIO1I,EAHFhB,EAAa2C,sFAOZjD,EAAUsD,WAAA,OADlBzD,EAgBM,MAAA,OAdJK,MAAM,qFACN8I,KAAK,aACJ,aAAU,QAAUhJ,EAAWwI,YAAA,QAAWxI,EAAUsD,gBAErDrC,GAAA,GAAApB,EASEoK,EARqB,KAAAC,EAAAlK,EAAAsD,YAAb,CAAA6G,EAAGC,SADbvK,EASE,MAAA,CAPCsG,IAAKiE,EACLlK,MAAKiB,EAAA,uEAAuEnB,EAAAwI,cAAgB4B,EAAK,UAAA,uBAElGpB,KAAK,MACJ,gBAAehJ,EAAWwI,cAAK4B,EAC/B,qBAAoBA,EAAK,IAC1BnB,SAAS"}